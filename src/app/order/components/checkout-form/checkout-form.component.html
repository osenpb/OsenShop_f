<div class="bg-black min-h-screen w-full py-16">

  <section class="max-w-4xl mx-auto px-6 text-white">

    <div class="mb-12 text-center">
      <h1 class="text-3xl font-bold tracking-tighter uppercase italic">
        Finalizar <span class="text-zinc-500 font-light">Compra</span>
      </h1>
      <div class="h-1 w-12 bg-zinc-800 mx-auto mt-4 rounded-full"></div>
    </div>

    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      class="space-y-8 bg-transparent"
    >

      <div class="backdrop-blur-md bg-zinc-900/40 border border-zinc-800 rounded-2xl p-8 hover:bg-zinc-900/60 transition-all duration-300">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-sm font-bold uppercase tracking-[0.2em] text-zinc-400">
            01. Datos Personales
          </h2>
          <span class="text-[10px] bg-zinc-800 text-zinc-400 px-2 py-1 rounded">Verificado</span>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-sm">
          @if (user()) {
            <div class="space-y-2">
              <p class="text-zinc-500 uppercase text-[10px] tracking-widest">Nombre</p>
              <p class="font-medium text-white text-base">{{ user()!.firstName }} {{ user()!.lastName }}</p>
            </div>

            <div class="space-y-2">
              <p class="text-zinc-500 uppercase text-[10px] tracking-widest">Email</p>
              <p class="font-medium text-white text-base">{{ user()!.email }}</p>
            </div>
          } @else {
            <div class="animate-pulse bg-zinc-800 h-12 rounded-xl w-full"></div>
            <div class="animate-pulse bg-zinc-800 h-12 rounded-xl w-full"></div>
          }
        </div>
      </div>

      <div class="backdrop-blur-md bg-zinc-900/40 border border-zinc-800 rounded-2xl p-8">
        <h2 class="text-sm font-bold uppercase tracking-[0.2em] text-zinc-400 mb-6">
          02. Dirección de Envío
        </h2>

        <div class="relative">
          <textarea
            formControlName="shippingAddress"
            rows="3"
            placeholder="Introduce tu dirección de entrega..."
            class="
              w-full bg-black/60 border border-zinc-800 rounded-xl p-4 text-sm text-white
              placeholder-zinc-600 focus:outline-none focus:ring-1 focus:ring-zinc-500
              transition-all resize-none
            "
          ></textarea>
        </div>

        @if (form.controls.shippingAddress.touched && form.controls.shippingAddress.invalid) {
          <div class="flex items-center gap-2 mt-3 text-red-500">
            <span class="w-1 h-1 bg-red-500 rounded-full"></span>
            <p class="text-[11px] uppercase tracking-tighter">La dirección es obligatoria para el envío</p>
          </div>
        }
      </div>

      <div class="backdrop-blur-md bg-zinc-900/40 border border-zinc-800 rounded-2xl p-8 relative overflow-hidden">
        <div class="absolute inset-0 bg-black/40 backdrop-grayscale-[0.5] z-10 flex items-center justify-center pointer-events-none">
           <span class="bg-zinc-950 border border-zinc-800 px-4 py-2 rounded-full text-[10px] uppercase tracking-[0.3em] text-zinc-500">
             Pago con tarjeta temporalmente deshabilitado
           </span>
        </div>

        <h2 class="text-sm font-bold uppercase tracking-[0.2em] text-zinc-400 mb-6">
          03. Método de Pago
        </h2>

        <div class="space-y-4">
          <div class="h-12 w-full bg-black/20 border border-zinc-800 rounded-xl"></div>
          <div class="grid grid-cols-2 gap-4">
            <div class="h-12 bg-black/20 border border-zinc-800 rounded-xl"></div>
            <div class="h-12 bg-black/20 border border-zinc-800 rounded-xl"></div>
          </div>
        </div>
      </div>

      <div class="flex flex-col md:flex-row items-center justify-between gap-6 pt-10">
        <div class="text-zinc-500 text-[11px] uppercase tracking-widest text-center md:text-left">
          Al confirmar, aceptas nuestras <br>
          <span class="text-zinc-300 decoration-zinc-700 underline underline-offset-4 cursor-pointer">políticas de privacidad</span>
        </div>

        <button
          type="submit"
          [disabled]="form.invalid"
          class="
            w-full md:w-auto bg-white text-black px-12 py-4 rounded-full text-xs font-bold uppercase tracking-[0.2em]
            hover:bg-zinc-200 transition-all transform active:scale-95
            disabled:opacity-20 disabled:cursor-not-allowed
            shadow-[0_10px_20px_rgba(255,255,255,0.1)]
          "
        >
          Confirmar Pedido
        </button>
      </div>

    </form>
  </section>
</div>
