<section class="max-w-7xl mx-auto px-6 py-12 bg-[#F2F2F2]">

  @if (isLoading()) {

  <!-- Skeleton -->
  <div class="
        animate-pulse
        grid grid-cols-1 md:grid-cols-2 gap-12
        p-8
      ">
    <div class="bg-neutral-200 dark:bg-neutral-800 rounded-xl aspect-square"></div>

    <div class="space-y-4">
      <div class="h-4 bg-neutral-200 dark:bg-neutral-800 rounded w-1/4"></div>
      <div class="h-8 bg-neutral-200 dark:bg-neutral-800 rounded w-3/4"></div>
      <div class="h-6 bg-neutral-200 dark:bg-neutral-800 rounded w-1/3"></div>
      <div class="h-20 bg-neutral-200 dark:bg-neutral-800 rounded"></div>
    </div>
  </div>

  } @else if (product()) {

  <div class="
        grid grid-cols-1 md:grid-cols-2 gap-12
        bg-white dark:bg-neutral-900
        rounded-2xl
        shadow-sm
        p-8
      ">

    <!-- Imagen -->
    <div class="flex items-center justify-center">
      <div class="
            w-full max-w-md aspect-square
            rounded-xl overflow-hidden
            border border-neutral-200 dark:border-neutral-800
            bg-neutral-50 dark:bg-neutral-800
          ">
        <img [src]="product()!.imageUrl" [alt]="product()!.name" class="w-full h-full object-cover" />
      </div>
    </div>

    <!-- Información -->
    <div class="flex flex-col gap-6">

      <!-- Categoría -->
      <span class="text-sm uppercase tracking-wide text-neutral-500">
        {{ product()!.category.name }}
      </span>

      <!-- Nombre -->
      <h1 class="text-3xl font-semibold text-neutral-900 dark:text-white">
        {{ product()!.name }}
      </h1>

      <!-- Precio -->
      <p class="text-2xl font-medium text-neutral-900 dark:text-white">
        ${{ product()!.price }}
      </p>

      <!-- Stock -->
      <p class="text-sm text-neutral-500 dark:text-neutral-400">
        Stock disponible: {{ product()!.stock }}
      </p>

      <!-- Cantidad a comprar -->
      <div class="flex items-center gap-2">
        <span class="text-sm text-neutral-500 dark:text-neutral-400">Cantidad:</span>

        <button type="button" class="px-3 py-1 bg-neutral-200 dark:bg-neutral-700 rounded
         hover:bg-neutral-300 dark:hover:bg-neutral-600 transition
         text-white font-bold" (click)="decrease()">
          −
        </button>

        <input
          #qty
          type="number"
          [min]="1"
          [max]="product()!.stock"
          class="w-16 text-center border rounded border-neutral-300 dark:border-neutral-700
         bg-white dark:bg-neutral-800 text-neutral-900 dark:text-white"
         [value]="quantity()"
         (input)="setQuantity(qty.valueAsNumber)" />

        <button type="button" class="px-3 py-1 bg-neutral-200 dark:bg-neutral-700 rounded
         hover:bg-neutral-300 dark:hover:bg-neutral-600 transition
         text-white font-bold" (click)="increase()">
          +
        </button>
      </div>

      <!-- Descripción -->
      <p class="text-neutral-600 dark:text-neutral-400 leading-relaxed">
        {{ product()!.description }}
      </p>

      <!-- Acciones -->
      <div class="flex gap-4 pt-4">

        <button class="
              px-6 py-3 rounded-lg
              bg-black text-white
              hover:bg-neutral-800
              transition
            "
            [disabled]="isAddingToCart()"
            (click)="addToCart()">
          Agregar al carrito
        </button>

        <button class="
              px-6 py-3 rounded-lg
              border border-neutral-300 dark:border-neutral-700
              text-neutral-700 dark:text-neutral-300
              hover:bg-neutral-100 dark:hover:bg-neutral-800
              transition
            ">
          Comprar ahora
        </button>

      </div>

    </div>
  </div>

  } @else {

  <!-- Error -->
  <div class="text-center text-red-500">
    Ocurrió un error al cargar el producto
  </div>

  }

</section>
