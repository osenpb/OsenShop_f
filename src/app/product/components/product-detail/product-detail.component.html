<section class="min-h-screen bg-black text-white py-20 px-6">
  <div class="max-w-7xl mx-auto">

    @if (isLoading()) {
    <!-- <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 animate-pulse">
        <div class="aspect-square bg-zinc-900 rounded-3xl border border-zinc-800"></div>
        <div class="space-y-6 py-8">
          <div class="h-4 bg-zinc-900 rounded w-1/4"></div>
          <div class="h-12 bg-zinc-900 rounded w-3/4"></div>
          <div class="h-8 bg-zinc-900 rounded w-1/4"></div>
          <div class="h-32 bg-zinc-900 rounded w-full"></div>
        </div>
      </div> -->
    <app-loading-spinner />
    }

    @else if (product()) {
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-16 items-start">

      <div class="relative group">
        <div
          class="absolute -inset-1 bg-linear-to-b from-zinc-700 to-black rounded-[2rem] blur opacity-20 group-hover:opacity-40 transition duration-1000">
        </div>
        <div
          class="relative aspect-square rounded-4xl overflow-hidden border border-zinc-800 bg-zinc-950 flex items-center justify-center">
          <img [src]="product()!.imageUrl" [alt]="product()!.name"
            class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" />
        </div>
      </div>

      <div class="flex flex-col">

        <div class="flex items-center gap-4 mb-6">
          <span
            class="px-3 py-1 bg-zinc-900 border border-zinc-800 text-[10px] uppercase tracking-[0.3em] text-zinc-400 rounded-full">
            {{ product()!.category.name }}
          </span>
          @if(product()!.stock > 0) {
          <span class="text-[10px] uppercase tracking-widest text-emerald-500 flex items-center gap-1.5">
            <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></span>
            En Stock <span class="text-xs text-zinc-500">| Cantidad: {{ product()!.stock }}</span>
          </span>
          }
        </div>

        <h1 class="text-4xl md:text-5xl font-bold tracking-tighter uppercase italic mb-4 leading-none">
          {{ product()!.name }}
        </h1>

        <p class="text-3xl font-light tracking-tight text-zinc-100 mb-8">
          s/.{{ product()!.price | number:'1.2-2' }}
        </p>

        <div class="h-[1px] w-full bg-zinc-900 mb-8"></div>

        <div class="mb-10">
          <h3 class="text-[10px] uppercase tracking-[0.2em] text-zinc-500 mb-3 font-bold">Descripción</h3>
          <p class="text-zinc-400 leading-relaxed text-sm font-light max-w-xl">
            {{ product()!.description }}
          </p>
        </div>

        <div class="flex flex-col gap-4 mb-10">
          <h3 class="text-[10px] uppercase tracking-[0.2em] text-zinc-500 font-bold">Seleccionar Cantidad</h3>
          <div class="flex items-center border border-zinc-800 w-fit rounded-full p-1 bg-zinc-950">
            <button
              (click)="decrease()"
              [disabled]="!canAddMore()"

              class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-900 transition-colors text-zinc-400 hover:text-white">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 12H4" />
              </svg>
            </button>

            <input #qty type="number" class="w-12 text-center bg-transparent border-none focus:ring-0 text-sm font-bold"
              [value]="quantity()"
              (input)="setQuantity(qty.valueAsNumber)"
              [disabled]="!canAddMore()"

              />

            <button
              (click)="increase()"
              [disabled]="!canAddMore()"

              class="w-10 h-10 flex items-center justify-center rounded-full hover:bg-zinc-900 transition-colors text-zinc-400 hover:text-white">
              <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24"
                stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
              </svg>
            </button>
          </div>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 pt-4 border-t border-zinc-900">
          <button
          (click)="addToCart()"
          [disabled]="isAddingToCart()|| !canAddSelectedQuantity() "
            class="flex-1 bg-white text-black h-14 rounded-full font-bold uppercase tracking-widest text-xs hover:bg-zinc-200 transition-all active:scale-95 disabled:opacity-50">
            @if(isAddingToCart()) {
                  Producto agregado
            }
            @if (!canAddMore()) {
            <p class="text-xs text-red-400 mt-2">
              Ya alcanzaste el stock máximo disponible
            </p>
            } @else{
              Producto agregado
            }
          </button>

          <button
            class="flex-1 border border-zinc-800 h-14 rounded-full font-bold uppercase tracking-widest text-xs hover:bg-zinc-900 transition-all active:scale-95">
            Comprar Ahora
          </button>
        </div>

        <div class="mt-12 grid grid-cols-2 gap-4">
          <div class="flex items-center gap-3 p-4 border border-zinc-900 rounded-2xl">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-zinc-500" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4" />
            </svg>
            <span class="text-[10px] uppercase tracking-tighter text-zinc-500">Envío Express Global</span>
          </div>
          <div class="flex items-center gap-3 p-4 border border-zinc-900 rounded-2xl">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-5 h-5 text-zinc-500" fill="none" viewBox="0 0 24 24"
              stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1"
                d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />
            </svg>
            <span class="text-[10px] uppercase tracking-tighter text-zinc-500">Garantía de Autenticidad</span>
          </div>
        </div>

      </div>
    </div>
    }

    @else {
    <div class="flex flex-col items-center justify-center py-40 border border-dashed border-zinc-800 rounded-[3rem]">
      <div class="w-16 h-16 bg-zinc-900 rounded-full flex items-center justify-center mb-6">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-red-900" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
            d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
        </svg>
      </div>
      <h2 class="text-xl font-bold uppercase tracking-widest text-zinc-200">Producto no encontrado</h2>
      <a routerLink="/home/index"
        class="mt-6 text-sm text-zinc-500 hover:text-white underline underline-offset-8 transition-colors">Volver a la
        colección</a>
    </div>
    }

  </div>
</section>
